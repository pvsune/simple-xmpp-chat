function adac_floatedDivStartHandler(options){options.initialCall&&(options.currElem.down(0).setStyle({display:"block"}),options.currElem.select("div.sh-floating-box-outer").each(function(item){item.style.display="block"}),options.currElem.setStyle({display:"none",textAlign:"left",position:"absolute",zIndex:PageOverlayOptions.zIndex+1}));ADAC.PopupLayer.onShow(options.elemId);ADAC.showElementsForIE("select",options.elemId),adac_floatedDivPositionHandler(options,!0),options.obj._activeElement=options.elemId}function adac_floatedDivPositionHandler(options,isFreshStart){var aPageScroll;isFreshStart=typeof isFreshStart=="undefined"?!1:!0;var vpDims=document.viewport.getDimensions(),elemDims=options.obj.getElementDims(options.elemId),top=vpDims.height/2-elemDims.height/2,left=vpDims.width/2-elemDims.width/2;top<5&&(top=5),left<5&&(left=5),aPageScroll=document.viewport.getScrollOffsets(),top+=aPageScroll[1],left+=aPageScroll[0],isFreshStart?options.currElem.setStyle({display:"block",top:top+"px",left:left+"px"}):new Effect.Move(options.currElem,{x:left,y:top,mode:"absolute"})}if(ADAC=="undefined")throw"Missing ADAC core";else if(Prototype=="undefined")throw"Missing Prototype";ADAC.floatedDivVersion="0.2",ADAC.floatedDiv=Class.create({VERSION:"0.2",_currentSourceType:"popup",SOURCE_TYPE_POPUP:"popup",SOURCE_TYPE_INLINE:"inline",SOURCE_TYPE_SWITCH:"switch",PREPROCESS_SHOW:"preShow",PREPROCESS_HIDE:"preHide",_transferElement:"transfer_popuplayer",_transferInlineElement:"transfer_inlinelayer",_activeElement:"",_dimsCache:[],_hooks:[],initialize:function(){$(this._transferElement)&&($(this._transferElement).id+="_backup_no_more_needed");var objBody=$$("form")[0];objBody.appendChild($(Builder.node("div",{id:"PopuplayerBox",style:"display:block;",className:"popuplayer-box"}))),objBody.appendChild($(Builder.node("div",{id:this._transferInlineElement,style:"display:none;",className:"transfer-layer"})))},show:function(elemId,removePrevious){var isInitialPageOverlay,param;typeof popCalendar!="undefined"&&popCalendar.hide(),typeof removePrevious=="undefined"&&(removePrevious=!0),isInitialPageOverlay=!0,this._activeElement!=""&&(this.hide(this._activeElement,!1),isInitialPageOverlay=!1);var res=this._callHook(elemId,this.PREPROCESS_SHOW),transferId="transfer_"+elemId,bInitialCall=!1,currElem=$(elemId),parentElem=$(transferId);parentElem&&(removePrevious&&this.removePopupLayerChild(elemId),parentElem.innerHTML!==""&&($("PopuplayerBox").appendChild(currElem),parentElem.innerHTML="",parentElem.style.display="none",bInitialCall=!0)),param={obj:this,initialCall:bInitialCall,currElem:currElem,elemId:elemId},isInitialPageOverlay?ADAC.pageOverlay.setStartCallback(new PageOverlayCallback("adac_floatedDivStartHandler",param)).start():adac_floatedDivStartHandler(param),ADAC.pageOverlay.setResizeCallback(new PageOverlayCallback("adac_floatedDivPositionHandler",param))},showctrl:function(elemId,transferId){var isInitialPageOverlay=!0,param;this._activeElement!=""&&(this.hide(this._activeElement,!1),isInitialPageOverlay=!1);var res=this._callHook(elemId,this.PREPROCESS_SHOW),bInitialCall=!1,currElem=$(elemId),parentElem=$(transferId);parentElem&&parentElem.innerHTML!=""&&($("PopuplayerBox").appendChild(currElem),parentElem.innerHTML="",parentElem.style.display="none",bInitialCall=!0),param={obj:this,initialCall:bInitialCall,currElem:currElem,elemId:elemId},isInitialPageOverlay?ADAC.pageOverlay.setStartCallback(new PageOverlayCallback("adac_floatedDivStartHandler",param)).start():adac_floatedDivStartHandler(param),ADAC.pageOverlay.setResizeCallback(new PageOverlayCallback("adac_floatedDivPositionHandler",param))},hide:function(elemId,hidePageOverlay){typeof hidePageOverlay=="undefined"&&(hidePageOverlay=!0);var res=this._callHook(elemId,this.PREPROCESS_HIDE),elem=$(elemId);elem.style.display="none",this._activeElement="",hidePageOverlay&&ADAC.pageOverlay.end(),ADAC.InfoLayer.hide();ADAC.PopupLayer.onHide(elemId)},setHookFunction:function(elemId,hook,func){typeof this._hooks[elemId]=="undefined"&&(this._hooks[elemId]=[]),hook==this.PREPROCESS_SHOW?this._hooks[elemId][this.PREPROCESS_SHOW]=func:hook==this.PREPROCESS_HIDE&&(this._hooks[elemId][this.PREPROCESS_HIDE]=func)},getSourceElementId:function(elemId){return this._currentSourceType==this.SOURCE_TYPE_POPUP?"transfer_"+elemId:this._currentSourceType==this.SOURCE_TYPE_INLINE?elemId+"_popUp":this._currentSourceType==this.SOURCE_TYPE_SWITCH?elemId:elemId},getActiveElementId:function(){return this._activeElement},switchLayer:function(layerToHide,layerToShow){var sourceTypeBackup=this._currentSourceType;layerToShow==null?(this._currentSourceType=this.SOURCE_TYPE_INLINE,layerToShow=this.getSourceElementId(layerToHide)):this._currentSourceType=this.SOURCE_TYPE_SWITCH;if($(layerToShow).style.display=="block")$(layerToShow).innerHTML=$(this._transferInlineElement).innerHTML,$(this._transferInlineElement).setStyle({display:"none",textAlign:"left",top:"0px",left:"0px",width:"0px",height:"0px"}),$(this._transferInlineElement).innerHTML="",$(layerToHide).setStyle({display:"block"}),$(layerToShow).hide(),ADAC.InfoLayer.hide(),ADAC.pageOverlay.end();else{ADAC.pageOverlay.start(),$(this._transferInlineElement).innerHTML=$(layerToShow).innerHTML;var offset=$(layerToHide).cumulativeOffset(),hideDims=this.getElementDims(layerToHide),showDims=this.getElementDims(layerToShow),top=offset.top,left=offset.left;$(this._transferInlineElement).setStyle({backgroundColor:"#ffffff",display:"block",textAlign:"left",position:"absolute",zIndex:PageOverlayOptions.zIndex+1,top:top+"px",left:left+"px",width:hideDims.width+"px",height:showDims.height+"px"}),$(layerToShow).setStyle({height:showDims.height+"px",display:"block",visibility:"hidden"}),$(layerToShow).innerHTML="",$(layerToHide).hide(),ADAC.pageOverlay.setDimensions(!0)}this._currentSourceType=sourceTypeBackup},getElementDims:function(elemId){return this._dimsCache[elemId]||(this._dimsCache[elemId]=$(elemId).getDimensions()),this._dimsCache[elemId]},_callHook:function(elemId,hook){return typeof this._hooks[elemId]=="undefined"?null:typeof this._hooks[elemId][hook]=="undefined"?null:this._hooks[elemId][hook]()},_getParentElement:function(){},removePopupLayerChild:function(id){for(var popupNode=$("PopuplayerBox"),childToRemove=null,child,i=0;i<popupNode.childNodes.length;i++)popupNode.childNodes[i].nodeType==1&&(child=popupNode.childNodes[i],child.getAttribute("id")==id&&(childToRemove=child));childToRemove!==null&&popupNode.removeChild(childToRemove)}}),ADAC.contentSectorHighlighter={_transferInlineElement:"transfer_inlinelayer",_activeSector:"",_padding:4,_elem:null,_elemCloseID:null,_layer:null,getActiveSector:function(){return this._activeSector},toggle:function(id){this._activeSector==id?this.reset():this.highlight(id)},highlight:function(id){var res;this._layer==null&&(this._layer=$(this._transferInlineElement)),this._elem=$(id),this._elemCloseID=id+"_close";if(!this._elem)return;this._activeSector!=""&&(res=this.reset()),ADAC.pageOverlay.start(),this._layer.innerHTML=this._elem.innerHTML;var offset=this._elem.cumulativeOffset(),showDims=this._elem.getDimensions(),top=offset.top-this._padding,left=offset.left-this._padding;ADAC.world=="ves"&&(top+=1,left+=1),this._layer.setStyle({padding:this._padding+"px",backgroundColor:"#ffffff",display:"block",textAlign:"left",position:"absolute",zIndex:PageOverlayOptions.zIndex+1,top:top+"px",left:left+"px",width:showDims.width+"px",height:showDims.height+"px"}),this._elem.setStyle({height:showDims.height+"px",display:"block",visibility:"hidden"}),this._elem.innerHTML="",$(this._elemCloseID)&&$(this._elemCloseID).show(),this._activeSector=id,ADAC.pageOverlay.setDimensions(!0)},reset:function(){return this._activeSector==""?!0:(this._elem.innerHTML=this._layer.innerHTML,this._layer.setStyle({display:"none",textAlign:"left",top:"0px",left:"0px",width:"0px",height:"0px"}),this._layer.innerHTML="",this._elem.setStyle({display:"block",visibility:"visible"}),this._elem.show(),$(this._elemCloseID)&&$(this._elemCloseID).hide(),this._layer.hide(),this._activeSector="",ADAC.InfoLayer.hide(),ADAC.pageOverlay.end(),!0)}},$(document).observe("dom:loaded",function(){ADAC.floatedDivVersion=="0.2"&&(ADAC.floatedDiv=new ADAC.floatedDiv)});